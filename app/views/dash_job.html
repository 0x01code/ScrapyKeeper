<style>
    .panel {
        margin-bottom: 20px;
    }
</style>
<div ng-controller="DashjobCtrl">
    <div class="page-header">
        <h1 id="tables">Jobs</h1>
        <div class="togglebutton">
            <label>
                <span>Singleton </span>
                <input type="checkbox" data-mdproc="true" ng-click="jobShowType()"><span class="toggle"></span>
                <span>Cluster </span>
            </label>
        </div>
    </div>


    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Pending</h3>
        </div>
        <div class="panel-body" style="overflow: scroll">
            <div class="bs-component" style="max-width:100%">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Daemon</th>
                        <th>Project</th>
                        <th>Spider Name</th>
                        <th>Job Id</th>
                        <th>Log</th>
                        <th class="disabled">Items</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="item in jobs.pending">
                        {{item}}
                        <td>{{$index}}</td>
                        <td>{{item.daemon}}</td>
                        <td>{{currProject}}</td>
                        <td>{{item.spider}}</td>
                        <td>{{item.id}}</td>
                        <!--<td><a href="http://115.29.241.153:6800/logs/{{currProject}}/{{item.spider}}/{{item.id}}.log" target="_blank" ><i class="material-icons">open_in_new</i></a></td>-->
                        <td><a class="btn btn-default" href="javascript:void(0)" ng-click="btnLogClick(item)"><i
                                class="material-icons">open_in_new</i></a></td>
                        <td><a class="btn btn-default" href="#"><i class="material-icons">open_in_new</i></a></td>
                    </tr>
                    </tbody>
                </table>
                <div id="source-button" class="btn btn-primary btn-xs" style="display: none;">&lt; &gt;</div>
            </div><!-- /example -->
        </div>
    </div>

    <div class="panel panel-info">
        <div class="panel-heading">
            <h3 class="panel-title">Running</h3>
        </div>
        <div class="panel-body" style="overflow: scroll">
            <div class="bs-component" style="max-width:100%">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Daemon</th>
                        <th>Project</th>
                        <th>Spider Name</th>
                        <th>Job Id</th>
                        <th>StartTime</th>
                        <th>Log</th>
                        <th class="disabled">Items</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="item in jobs.running">
                        {{item}}
                        <td>{{$index}}</td>
                        <td>{{item.daemon}}</td>
                        <td>{{currProject}}</td>
                        <td>{{item.spider}}</td>
                        <td>{{item.id}}</td>
                        <td>{{item.start_time}}</td>
                        <!--<td><a href="http://115.29.241.153:6800/logs/{{currProject}}/{{item.spider}}/{{item.id}}.log" target="_blank" ><i class="material-icons">open_in_new</i></a></td>-->
                        <td><a class="btn btn-default" href="javascript:void(0)" ng-click="btnLogClick(item)"><i
                                class="material-icons">open_in_new</i></a></td>
                        <td><a class="btn btn-default" href="#"><i class="material-icons">open_in_new</i></a></td>
                        <td><a href="javascript:void(0)" class="btn btn-raised btn-danger"
                               ng-click="btnCancelClick(item)" style="vertical-align: top;"><i class="material-icons">stop</i>
                            Cancle </a></td>
                    </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>

    <div class="panel panel-success">
        <div class="panel-heading">
            <h3 class="panel-title">Finished<a href="javascript:void(0)" ng-click="btnJobFinishedClick()"
                                               style="float:right;"><i class="material-icons">refresh</i></a></h3>

        </div>
        <div class="panel-body" style="overflow: scroll">
            <div class="bs-component" style="max-width:100%">
                <table class="table table-striped table-hover">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Daemon</th>
                        <th>Project</th>
                        <th>Spider Name</th>
                        <th>Job Id</th>
                        <th>StartTime</th>
                        <th>EndTime</th>
                        <th>RunningTime</th>
                        <th>Log</th>
                        <th class="disabled">Items</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="item in jobs.finished">
                        {{item}}
                        <td>{{$index}}</td>
                        <td>{{item.daemon}}</td>
                        <td>{{currProject}}</td>
                        <td>{{item.spider}}</td>
                        <td>{{item.id}}</td>
                        <td>{{item.start_time}}</td>
                        <td>{{item.end_time}}</td>
                        <td>{{item.running_time}} h</td>
                        <!--<td><a href="http://115.29.241.153:6800/logs/{{currProject}}/{{item.spider}}/{{item.id}}.log" target="_blank" ><i class="material-icons">open_in_new</i></a></td>-->
                        <td><a class="btn btn-default" href="javascript:void(0)" ng-click="btnLogClick(item)"><i
                                class="material-icons">open_in_new</i></a></td>
                        <td><a class="btn btn-default" href="#"><i class="material-icons">open_in_new</i></a></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

<div class="modal" id="modelLog" style="height: 100%;width: 100%;">
    <div class="modal-dialog" style="height: 100%;width: 100%;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                        onclick="$('#modelLog').hide()">Ã—
                </button>
                <a href="{{logUrl}}" target="_blank" class="close" data-dismiss="modal" aria-hidden="true"><i
                        class="material-icons">open_in_new</i></a>
                <h4 class="modal-title">Log</h4>
            </div>
            <div class="modal-body" style="height: 760px;width: 100%;">
                <iframe id="frameLog" width="100%" height="100%" ng-src="{{logUrl}}"></iframe>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
</div>



